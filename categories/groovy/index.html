<!DOCTYPE html> <!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]--> <!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]--> <!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]--> <head> <meta charset="utf-8"> <title>Category: Groovy - Espace de fouille</title> <meta name="author" content="Frédéric Bouquet"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="canonical" href="espacedefouille.org/categories/groovy/"> <link href="/images/favicon-eec3051d5c356d1798bea1d8a3617c51.png" rel="icon"> <link href="/stylesheets/screen-212a3205d97b53ef71581e910c98f79c.css" media="screen, projection" rel="stylesheet" type="text/css"> <link href="atom.xml" rel="alternate" title="Espace de fouille" type="application/atom+xml"> <script src="/javascripts/libs/jquery.min-663628f795cb62444143fde1ebdf2b5b.js" type="text/javascript"></script> <script src="/javascripts/modernizr-2.0-f86b862d5ee138da61daf47f24116ed7.js" type="text/javascript"></script> <script src="/javascripts/octopress-52bd0860c81b8af484852d75380d38f3.js" type="text/javascript"></script> <script src="/javascripts/github-2c23ec60bbc7e962f6324b25d8b2ae44.js" type="text/javascript"></script> <script src="/javascripts/jquery.tweet-408e79928ca077df30b72fe36df5754e.js" type="text/javascript"></script> <script src="/javascripts/twitter-options-23cfa4cf39ed70e953245562c06698de.js" type="text/javascript"></script> <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> </head> <body> <header role="banner"><hgroup> <h1><a href="/">Espace de fouille</a></h1> <h2>Espace de fouille personnel</h2> </hgroup> </header> <nav role="navigation"><ul class="subscription" data-subscription="rss "> <li><a href="espacedefouille.org/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li> </ul> <form action="http://google.com/search" method="get"> <fieldset role="search"> <input type="hidden" name="q" value="site:espacedefouille.org"/> <input class="search" type="text" name="q" results="0" placeholder="Search"/> </fieldset> </form> <ul class="main-navigation"> <li><a href="/">Blog</a></li> <li><a href="/archives/">Archives</a></li> </ul> </nav> <div id="main"> <div id="content"> <div class="blog-index"> <article> <h1 id="entry-title">Category: Groovy</h1> <div class="subscribe"> <a rel="subscribe-rss" title="Stay tuned to Groovy category via RSS" href="/categories/groovy/atom.xml">RSS</a> </div> <article> <header> <h1 class="entry-title"><a href="/blog/2015/04/15/grain-github-et-nom-de-domaine-personnalise/">Grain+Github Et Nom De Domaine Personnalisé</a></h1> <p class="meta"> <time datetime="2015-04-15T10:56:00+02:00" pubdate data-updated=true> <span class="month">Apr</span> <span class="day">15</span>, <span class="year">2015</span> </time> </p> </header> <div class="entry-content"><p>Grain est un moteur de site web statique écrit en groovy. L'idée est d'utiliser Grain pour générer un blog (cet espace de fouille) et de stocker le tout comme une github page. L'ensemble, bien qu'assez simple et rapide nécessite les étapes suivantes : 1. Téléchargement d'un thème 2. Configuration 3. Sauvegarde du "backend" 4. Génération des pages et publication sur Github 5. Associer un nom de domaine</p> <h1>Téléchargement d'un thème</h1> <p>Un site grain est ce que l'on appelle un thème. L'équipe Grain et la communauté en proposent plusieurs qui peuvent être téléchargés ici : <a href="http://sysgears.com/grain/themes/">page de thèmes</a></p> <p>Il est aussi possible de récupérer un thème directement depuis Github, mais une archive suffit la plupart du temps.</p> <p>Une fois l'espace de travail de grain créé à partir du thème, la bête se compose ainsi : - content : les différentes pages qui forment le site - theme : les fichiers relatifs au thème, que ce soit les éléments graphiques ou les commandes custom - SiteConfig.groovy : la configuration du site (infos générales, plugins activés, ...)</p> <p>Tester le site nécessite simplement à exécuter la commande <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>grainw
</span></code></pre></td></tr></table></div></figure> et à se connecter à <a href="http://localhost:4000">http://localhost:4000</a></p> <h1>Configuration</h1> <p>Tout se passe dans le fichier SiteConfig.groovy. Les commentaires du fichier aident à s'y retrouver.</p> <p>La configuration du dépôt github se situe dans la variable gh<em>pages</em>url.</p> <h1>Sauvegarde du backend</h1> <p>Le dépôt actuel contient les fichiers qui permettront de générer le site. Il convient donc de stocker l'ensemble dans un dépôt différent que le site lui même. De mon côté, j'utilise soit un dépôt privé sur l'un de mes serveurs ou un dépôt privé bitbucket.</p> <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>git remote add origin <span class="nt">&lt;gitremoteurl&gt;</span>
</span></code></pre></td></tr></table></div></figure> <h1>Génération des pages et publication sur Github</h1> <p>Dans le cas d'un blog à partir du thème <a href="https://github.com/sysgears/grain-theme-octopress">octopress</a>, il est possible de créer un post à partir de la commande :</p> <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>./grainw create-post &quot;Nom du post&quot;
</span></code></pre></td></tr></table></div></figure> <p>Le fichier correspondant sera créé dans content/blog</p> <p>Générer les pages en vue d'une publication :</p> <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>./grainw generate
</span></code></pre></td></tr></table></div></figure> <p>Déployer le site sur github pages:</p> <figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>./grainw deploy
</span></code></pre></td></tr></table></div></figure> <p>J'utilise une organisation github et je pousse les pages générées dans le dépôt <nom_organisation>.github.io comme précisé dans la doc <a href="https://pages.github.com/">github pages</a></p> <h1>Associer un nom de domaine</h1> <p>Par défaut, le site sera accessible via <nom_organisation>.github.io. Dans la plupart des cas, on préfère un nom de domaine spécifique, comme c'est le cas pour l'espace de fouille.</p> <p>Pour ce faire, il convient de louer un nom de domaine au près d'un provider comme Gandi ou OVH. Une fois fait, la configuration nécessite la création d'une redirection (CNAME) vers <nom_organisation>.github.io. Une fois fait, une fois la propagation terminée (pouvant aller jusqu'à 2 jours), il faut préciser à github que le nom de domaine à utiliser pour le site statique est personnalisé.</p> <p>Cela se fait en ajoutant à la racine du site un fichier CNAME. Pour nous, ce fichier est à créer dans content. Le fichier contient simplement le nom de domaine à utiliser (pour moi : espacedefouille.org).</p> <p>Une fois le site déployé, il sera accessible via son nom de domaine.</p> </div> </article> </article> <div class="pagination"> <div class="links"> </div> </div> </div> <aside class="sidebar"> <section> <h1>Recent Posts</h1> <ul id="recent_posts"> <li class="post"> <a href="/blog/2015/04/23/comment-nommer-ses-tests-unitaires/">Comment Nommer Ses Tests Unitaires</a> </li> <li class="post"> <a href="/blog/2015/04/23/creer-un-lien-dans-trello/">Créer Un Lien Dans Trello</a> </li> <li class="post"> <a href="/blog/2015/04/15/grain-github-et-nom-de-domaine-personnalise/">Grain+Github Et Nom De Domaine Personnalisé</a> </li> <li class="post"> <a href="/blog/2015/04/13/l-espace-de-fouille-fait-peau-neuve/">L'espace De Fouille Fait Peau Neuve</a> </li> </ul> </section> <section> <h1>GitHub Repos</h1> <a href="https://github.com/bouquetf">bouquetf</a> on GitHub </section> <section> <h1>My Tweets</h1> <div class="tweet query footer"></div> <a href="https://twitter.com/bouquetf" class="twitter-follow-button" data-show-screen-name="true" data-show-count="true" data-lang="fr" data-size="large"> Follow @bouquetf </a> <script>!function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = "//platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js, fjs);
        }
    }(document, "script", "twitter-wjs");
    </script> </section> <section> <h1>About Me</h1> <p>Explorateur curieux de tout.</p> </section> <section class="social"> <h1> <a href="https://twitter.com/bouquetf"> <div class="icon twitter-icon"></div> Twitter </a> </h1> </section> <section class="social"> <h1> <a href="https://plus.google.com/115349045793242426218?rel=author"> <div class="icon gplus-icon"></div> Google+ </a> </h1> </section> </aside> </div> </div> <footer role="contentinfo"><p> Copyright &copy; 2015 - Frédéric Bouquet - <span class="credit">Powered by <a href="http://sysgears.com/grain/">Grain</a></span> </p> </footer> <div id="fb-root"></div> <script>
    (function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) {return;}
      js = d.createElement(s); js.id = id; js.async = true;
      js.src = "//connect.facebook.net/fr_FR/all.js#appId=212934732101925&xfbml=1";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
  </script> <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script> <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script> </body> </html>